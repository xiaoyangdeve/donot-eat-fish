---
title: A/B测试的理论基础
date: 2023-02-10 13:10:20
tags: 
  - A/B测试
permalink: /ab_test/3f2c9a/
titleTag: 
categories: 
  - A/B-Test
author: 
  name: 不爱吃鱼的bobo
---
## 假设检验是什么

*   选择一种合适的检验方法，去验证A/B测试中我们提出的假设是否正确

*   在A/B测试的预警中，假设一般是关于实验组和对照组指标大小的推断

*   假设是什么

    *   零假设（原假设），实验组和对照组的指标是相同的

    *   备择假设，实验组和对照组的指标是不同的

*   检验

    *   按照角度分类

        *   单尾检验，又叫做单边检验，不仅在假设中说明了两个表叫对象不同，并且还明确了谁大谁小，具体关系

        *   双尾检验，又叫做双边检验，值得是仅仅在假设中说明了两个比较对象的不同，并没有明确具体关系或谁大谁小

    *   按照样本量个数分类

        *   单样本检验，一个样本与具体值进行比较

        *   双样本检验，两组样本数据进行比较

        *   配对检验，比较同一组样本在条件发生变化前后的数据变化

    *   按照检验方法

        *   T检验

            *   当不知道总体方差时选用，一般用于均值类指标

        *   Z检验

            *   当我们已知总体方差，且样本量大于30时选用，一般用于概率类指标

        *   ![](https://api2.mubu.com/v3/document_image/14f8b442-f1c0-4c16-9e7b-fb7f92cbb212-13037474.jpg)

*   在A/B测试中更推荐使用双尾检验

    *   双尾检验可以让数据自身在决策中发挥更大的作用，减少任何的主观想法来干扰数据的发挥作用。

    *   双尾检验可以帮助我们全面的考虑变化带来的正、负面结果，更接近于现实情况

*   总结：在A/B测试中，一般我们选用双尾、双样本的T检验或者Z检验

## 指标的统计属性，指的是什么

*   均值类指标

    *   用户的平均使用时长

    *   用户平均购买金额

    *   用户平均购买频率等

*   概率类指标

    *   用户的点击率

    *   转化率

    *   购买率等


## 常用统计学知识

### 概率分布

*   在数据量足够大时，均值类指标服从正态分布

*   概率类指标本质上服从二项分布，但是在数据量足够大时也服从正态分布

### 正态分布

*   正态分布是A/B测试中的指标最主要的分布，是计算岩本量大小和分析测试结果的前提

*   在统计学中，如果一个随机变量x的概率密度函数是

*   ![](https://api2.mubu.com/v3/document_image/9839599b-3c88-4aa7-aef4-76a5a76a418c-13037474.jpg)
*   *   ![](https://api2.mubu.com/v3/document_image/3511e997-7c3a-4968-92be-5d9022c1c023-13037474.jpg)
*   任何一个正态分布都可以通过标准化手段变成标准正态分布

### 中心极限定理

*   不管随机变量的概率分布是什么，只要取样的样本足够大时，那么这样样本的平均值分布就会趋近于正态分布

*   样本大量一般约定俗成超过30即可

### 二项分布

*   业务中的概率类指标，具体到用户行为时，结果只有两种：要么发生，要么不发生。这种两种结果的事件叫做二元事件，描述二元事件概率分布的术语也就是二项分布
*   在二项分布中有一个从实践中总结出的经验公式

    *   min(np,n(1-p)) >= 5，其中，n 为样本大小，p 为概率的平均值。
    *   np 或者 n(1-p) 中相对较小的一方大于等于 5，只有二项分布符合这个公式时，才可以近似于正态分布。这是中心极限定理在二项分布中的变体。

## 如何利用假设检验做出推断

*   *   ![](https://api2.mubu.com/v3/document_image/232c0747-800e-43d9-9f41-4e92d8e5e24a-13037474.jpg)
*   **两类结果**

    *   1、接受零假设，拒绝备择假设，实验组和对照组的指标是相同的

    *   2、接受备择假设，拒绝零假设，实验组和对照组的指标是不相同的

*   两类错误

    *   **第一类错误（弃真）**

        *   统计上的定义是拒绝了事实上是正确的零假设。在 A/B 测试中，零假设是两组的指标是相同的，当假设检验推断出两组指标不同，但事实上两组指标相同时，就是第一类错误。我们把两组指标不同称作阳性（Positive）。所以，第一类错误又叫假阳性（False Positive）

        *   发生第一类错误的概率用α表示，即在零假设为真拒绝零假设的概率，也被称为显著水平（Significance Level）。“显著”是指错误发生的概率大，统计上把发生率小于 5% 的事件称为小概率事件，代表这类事件不容易发生。因此显著水平一般也为 5%。

    *   **第二类错误（取伪）**

        *   统计上的定义是接受了事实上是错误的零假设。在 A/B 测试中，当假设检验推断出两组指标相同，但事实上两组指标是不同时，就是第二类错误。我们把两组指标相同称作阴性（Negative），所以第二类错误又叫假阴性（False Negative）。

        *   发生第二类错误的概率用β表示，统计上一般定义为 20%。

    *   参考文章：https://zhuanlan.zhihu.com/p/100509201
*   如何通过假设检验得到测试结果

    *   **P值法**

        *   <font color=red>**P值，p值是在假定原假设（零假设）为真时，得到与样本相同或者更极端的结果的概率**</font>。在 A/B 测试的语境下，P 值就是当对照组和实验组指标事实上是相同时，在 A/B 测试中用样本数据所观测到的“实验组和对照组指标不同”出现的概率。

            *   当 P 值小于 5% 时（小概率事件反证法，我们认为小概率事件不可能发生），我们拒绝零假设，接受备择假设，得出两组指标是不同的结论，又叫做结果显著。

            *   当 P 值大于 5% 时，我们接受零假设，拒绝备择假设，得出两组指标是相同的结论，又叫做结果不显著。

    *   **置信区间法**

        *   置信区间是一个范围，一般前面会跟着一个百分数，最常见的置信区间是95%的置信区间。即在统计上，对于一个随机变量来说，有 95% 的概率包含总体平均值（Population mean）的范围，就叫做 95% 的置信区间。

        *   A/B 测试本质上就是要判断对照组和实验组的指标是否相等

            *   计算实验组和对照组指标的差值δ。因为指标是随机变量，所以它们的差值δ也会是随机变量，具有一定的波动性。

            *   我们就要计算出δ的置信区间，然后看看这个置信区间是否包括 0。如果包括 0 的话，则说明δ有可能为 0，意味着两组指标有可能相同；如果不包括 0，则说明两组指标不同。